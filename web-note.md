# 前端笔记

## async && defer

### async 属性

- ​ 作用：让脚本异步加载，加载完成后立即执行。
- ​ 特点：
  脚本的加载不会阻塞 HTML 解析。
  脚本一旦加载完成，会立即执行，此时可能会中断 HTML 解析。
  多个 async 脚本的执行顺序不确定，取决于哪个脚本先加载完成。
- 适用场景：适用于不依赖其他脚本或 DOM 的独立脚本，例如统计脚本或广告脚本。

### defer 属性

- 作用：让脚本异步加载，但延迟到 HTML 解析完成后再执行。
- 特点：
  脚本的加载不会阻塞 HTML 解析。
  脚本的执行会延迟到 HTML 解析完成后，且在 DOMContentLoaded 事件之前。
  多个 defer 脚本会按照它们在文档中的顺序依次执行。
- 适用场景：适用于依赖 DOM 或其他脚本的脚本，确保脚本在 DOM 准备好后执行。

### ​ 两者对比

| 特性                     | async                           | defer                     |
| ------------------------ | ------------------------------- | ------------------------- |
| ​ 加载是否阻塞 HTML 解析 | 否                              | 否                        |
| ​ 执行时机               | 加载完成后立即执行              | HTML 解析完成后执行       |
| 执行顺序                 | 不确定                          | 顺序执行                  |
| 适用场景                 | 独立脚本，不依赖 DOM 或其他脚本 | 依赖 DOM 或其他脚本的脚本 |

### 示例

```html
<!-- async: 加载完成后立即执行，顺序不确定 -->
<script src="script1.js" async></script>
<script src="script2.js" async></script>

<!-- defer: 加载后延迟到 HTML 解析完成，按顺序执行 -->
<script src="script1.js" defer></script>
<script src="script2.js" defer></script>
```

### 总结

使用 async 时，脚本的执行顺序无法保证，适合独立脚本。
使用 defer 时，脚本会按顺序执行，适合依赖 DOM 或其他脚本的场景。
如果既不使用 async 也不使用 defer，脚本会同步加载并阻塞 HTML 解析，影响页面性能。
